window.onload = function() {
    const data = [
        {
            comunidad: "Toledo",
            provincias: [
                { nombre: "Toledo", records: [{ name: "Blade Of Justice", player: "AzaxxGD", videoUrl: "https://www.youtube.com/watch?v=naWcVb1VqlA" }] }
            ]
        },
        {
            comunidad: "Aragón",
            provincias: [
                { nombre: "Zaragoza", records: [{ name: "Call Me Maybe", player: "Xenoncito", videoUrl: "https://www.youtube.com/watch?v=X3RyySRwo_I" }] }
            ]
        }
    ];

    const container = document.getElementById('list-container');
    if (!container) return;

    data.forEach(comu => {
        const title = document.createElement('h2');
        title.style.color = "#00f3ff";
        title.style.fontFamily = "Orbitron";
        title.innerText = comu.comunidad.toUpperCase();
        container.appendChild(title);

        comu.provincias.forEach(prov => {
            prov.records.forEach(rec => {
                // Extraer ID de YouTube para la miniatura
                const videoId = rec.videoUrl.split('v=')[1]?.split('&')[0];
                const thumb = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
                
                const card = document.createElement('div');
                card.className = 'level-card';
                card.innerHTML = `
                    <div class="card-bg" style="background-image: url('${thumb}')"></div>
                    <div class="card-overlay"></div>
                    <div class="card-info">
                        <h4>${rec.name}</h4>
                        <p>Logrado por: ${rec.player}</p>
                    </div>
                    <a href="${rec.videoUrl}" target="_blank" class="btn-neon">VER PRUEBA</a>
                `;
                container.appendChild(card);
            });
        });
    });
}; // <-- Esta llave es la que faltaba y rompía todo
